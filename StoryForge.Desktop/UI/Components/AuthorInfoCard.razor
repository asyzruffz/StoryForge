@using StoryForge.Application.Books
@using StoryForge.Core.Data
@inject ISender sender;

<MudPaper Class="d-flex flex-column pa-4 rounded-lg" Width="480px" Height="260px" Elevation="4">
    <MudStack Row="true" Spacing="4" Class="mb-2">
        <MudText Typo="Typo.h5" Class="flex-grow-1">
            @(authorData?.Name ?? "Unnamed Author")
        </MudText>
        <MudFab IconColor="Color.Primary" DropShadow="false"
                StartIcon="@Icons.Material.Filled.Edit"
                Href="/general/author"></MudFab>
    </MudStack>
    <MudText>@(authorData?.Email ?? string.Empty)</MudText>
</MudPaper>

@code {
    Author? authorData;

    protected override async Task OnInitializedAsync()
    {
        var authorResult = await sender.Send(new GetAuthorOperation());
        authorData = authorResult.Or(Author.Invalid);
    }
}
