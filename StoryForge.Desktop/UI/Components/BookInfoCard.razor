@using StoryForge.Application.Projects
@using StoryForge.Core.Data
@inject ISender sender;

<MudPaper Class="d-flex flex-column pa-4 rounded-lg" Width="480px" Height="260px" Elevation="4">
    <MudStack Row="true" Spacing="4" Class="mb-2">
        <MudStack Spacing="0" Class="flex-grow-1">
            <MudText Typo="Typo.h5">
                @(bookData?.Title ?? "Untitled Title")
            </MudText>
            <MudText Typo="Typo.subtitle1">
                <i>@(bookData?.Subtitle ?? string.Empty)</i>
            </MudText>
        </MudStack>
        <MudFab IconColor="Color.Primary" DropShadow="false"
                StartIcon="@Icons.Material.Filled.Edit"
                Href="/general/book"></MudFab>
    </MudStack>
    <MudText>@(bookData?.Series ?? "Series 1")</MudText>
    <MudText>@(bookData?.Volume ?? "Volume 0")</MudText>
    <MudText>Genre: @(bookData?.Genre ?? "Unspecified")</MudText>
</MudPaper>

@code {
    Book? bookData;

    protected override async Task OnInitializedAsync()
    {
        var bookResult = await sender.Send(new GetBookOperation());
        bookData = bookResult.Or(Book.Invalid);
    }
}
